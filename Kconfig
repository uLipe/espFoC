menu "espFoC Settings"
    config ESP_FOC_USE_TORQUE_CONTROLLER
        bool "Enable espFoC closed-loop torque control"
        default n

    if ESP_FOC_USE_TORQUE_CONTROLLER

        config ESP_FOC_TORQUE_CONTROLLER_KP
            int "Torque controller proportional gain"
            default 10
            help
            Proportional gain of the motor torque controller

        config ESP_FOC_TORQUE_CONTROLLER_KI
            int "Torque controller integral gain"
            default 1
            help
            Integral gain of the motor torque controller
        
        config ESP_FOC_TORQUE_CONTROLLER_KD
            int "Torque controller derivative gain"
            default 0
            help
            Derivative gain of the motor torque controller
    
    endif 

    menu "espFoC Velocity control settings"

        config ESP_FOC_USE_VELOCITY_CONTROLLER
            bool "Enable espFoC closed-loop velocity control"
            default n

        if ESP_FOC_USE_VELOCITY_CONTROLLER
            config ESP_FOC_VELOCITY_CONTROLLER_KP
                int "Velocity controller proportional gain"
                default 1
                help
                Proportional gain of the motor Velocity controller
            
            config ESP_FOC_VELOCITY_CONTROLLER_KI
                int "Velocity controller integral gain"
                default 0
                help
                Integral gain of the motor Velocity controller
            
            config ESP_FOC_VELOCITY_CONTROLLER_KD
                int "Velocity controller derivative gain"
                default 0
                help
                Derivative gain of the motor Velocity controller
            
            config ESP_FOC_VELOCITY_CONTROLLER_RATE
                int "Velocity control runs at each inner control runs"
                range 4 100
                default 10
                help
                    How many times the inner control (voltage or torque) runs
                    before each velocity control update
            
            config ESP_FOC_VELOCITY_CONTROL_LIMIT
                int "Integrator limit on velocity control"
                default 5000
                help
                    Maximum value the integrator limit of velocity control
                    used by the pid controller anti-windup.
            
            config ESP_FOC_MAX_VELOCITY
                int "Maximum velocity in radians/seconds"
                default 50
                help
                    Maximum allowed command of velocity in both
                    directions in radians per seconds.
        endif 
    endmenu

    config ESP_FOC_ALIGN_STEP_DELAY_MS
        int "Delay between rotor alignment step in ms"
        default 5
        help
            Keeps the bridge active with step calculated 
            voltages to ensure the Q and D vectors to
            align, higher values increase better alignment
            in excheange of rotor core saturation.

    config NOOF_AXIS
        int "Number of motor outputs"
        range 1 4
        default 1
        help
            The number of motor outputs available, this option
            is the number of motor sets, each set is composed 
            by total PWM outputs and sensor inputs.

    config FOC_TASK_PRIORITY
        int "Priority task of foc controller"
        range 16 25
        default 25

    config FOC_TASK_STACK_SIZE
        int "Task stack size of foc controller"
        default 3072

endmenu
    
    
    